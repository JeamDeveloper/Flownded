<!DOCTYPE html>
<html>
<head>
    <title>Obtener firma de APK</title>
</head>
<body>
    <h1>Subir archivo APK</h1>
    <input type="file" id="apkFileInput">
    <button onclick="getApkSignature()">Obtener Firma</button>
    <p id="signature"></p>
    <button id="downloadButton" style="display: none;">Descargar Firma</button>

    <script>
        async function getApkSignature() {
            const fileInput = document.getElementById('apkFileInput');
            const signatureElement = document.getElementById('signature');
            const downloadButton = document.getElementById('downloadButton');

            if (fileInput.files.length > 0) {
                const apkFile = fileInput.files[0];
                const reader = new FileReader();

                reader.onload = async function() {
                    const arrayBuffer = reader.result;
                    const byteArray = new Uint8Array(arrayBuffer);

                    // Simulando la obtención de la firma (reemplaza con tu lógica real)
                    const signature = "EjemploDeFirma";

                    signatureElement.textContent = 'Firma: ' + signature;
                    downloadButton.style.display = 'block';

                    generateSignatureScript(signature);
                };

                reader.readAsArrayBuffer(apkFile);
            }
        }

        function generateSignatureScript(signature) {
            const scriptContent = `const apkSignature = "${signature}";`;
            const scriptBlob = new Blob([scriptContent], { type: 'application/javascript' });
            const scriptURL = URL.createObjectURL(scriptBlob);
            const scriptElement = document.createElement('script');
            scriptElement.src = scriptURL;
            document.body.appendChild(scriptElement);
        }

        function downloadSignature() {
            const signatureContent = `const apkSignature = "${apkSignature}";`;
            const signatureBlob = new Blob([signatureContent], { type: 'application/javascript' });
            const signatureURL = URL.createObjectURL(signatureBlob);
            const downloadLink = document.createElement('a');
            downloadLink.href = signatureURL;
            downloadLink.download = 'firma.js';
            downloadLink.click();
        }
    </script>
</body>
</html>